var mongoose = require('mongoose');

var databaseError;

console.log('connect to ' + 'mongodb://admin:spice5juice@ds045627.mongolab.com:45627/heroku_app10176768/cards');
mongoose.connect('mongodb://admin:spice5juice@ds045627.mongolab.com:45627/heroku_app10176768/cards');

mongoose.connection.on('error', function (error) {
    if (error) {
        console.log(error);
        databaseError = true;
    } else {
        console.log('connected to' + process.env.MONGOLAB_URI + '/cards');
    }
});

function getCardModel () {
    
    return mongoose.model('card', new mongoose.Schema({
        word : String,
        url : String
    }));
}

function isBroken () {

    return databaseError;
}

module.exports.isBroken = isBroken;
module.exports.getCardModel = getCardModel;
