var mongoose = require('mongoose');

var databaseError;
var databaseName = process.env.MONGOLAB_URI || 'mongodb://localhost:27017/cards';

console.log('connect to', databaseName);
mongoose.connect(databaseName);

mongoose.connection.on('error', function (error) {
    if (error) {
        console.log(error);
        databaseError = true;
    } else {
        console.log('connected to' + databaseName);
    }
});

function getCardModel () {
    
    return mongoose.model('card', new mongoose.Schema({
        word : String,
        url : String
    }));
}

function isBroken () {

    return databaseError;
}

module.exports.isBroken = isBroken;
module.exports.getCardModel = getCardModel;
